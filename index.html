<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Clay County IL - Directory</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react"></script>
</head>
<body class="bg-[#0f172a]">
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
        // Mapping Lucide Icons and React for the browser
        const { 
            Search, Briefcase, Home, MapPin, Phone, 
            Info, Globe, Trees, Landmark, Sparkles, 
            ChevronRight, ExternalLink 
        } = LucideReact;
        const { useState, useMemo, useEffect } = React;

        async function loadApp() {
            try {
                // Fetch the raw JS code from your GitHub repo
                const response = await fetch('https://raw.githubusercontent.com/KFruti88/Jobs-and-Land-for-Sale/main/ClayCountyDirectory.js');
                let code = await response.text();
                
                // Clean the code: Strips any stray import/export statements that break browsers
                code = code.replace(/import\s+.*?\s+from\s+['"].*?['"];?/g, '');
                code = code.replace(/export\s+default\s+.*?;?/g, '');

                // Translate JSX into standard JavaScript
                const transpiled = Babel.transform(code, { presets: ['react'] }).code;
                eval(transpiled);

                // Render the App component into the 'root' div
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(<App />);
            } catch (err) {
                console.error("Critical Error:", err);
                document.getElementById('root').innerHTML = `
                    <div class="text-white text-center mt-20">
                        <p class="text-xl font-bold">Error Loading Directory</p>
                        <p class="text-sm text-slate-500 mt-2">${err.message}</p>
                    </div>`;
            }
        }

        loadApp();
    </script>
</body>
</html>
